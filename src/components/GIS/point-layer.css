@keyframes marker-appear {
    from {
        transform: scale(0.3);
        opacity: 0;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
}

/* Natural light pulsing animations using theme motion variables */
@keyframes light-pulse-1 {
    0%, 100% { 
        filter: brightness(1.0) blur(0px);
        transform: scale(1);
    }
    25% { 
        filter: brightness(1.6) blur(1px);
        transform: scale(1.05);
    }
    50% { 
        filter: brightness(1.2) blur(0.5px);
        transform: scale(0.98);
    }
    75% { 
        filter: brightness(1.4) blur(0.8px);
        transform: scale(1.02);
    }
}

@keyframes light-pulse-2 {
    0%, 100% { 
        filter: brightness(1.0) blur(0px);
        transform: scale(1);
    }
    30% { 
        filter: brightness(1.5) blur(0.8px);
        transform: scale(1.03);
    }
    60% { 
        filter: brightness(1.2) blur(0.3px);
        transform: scale(0.99);
    }
    80% { 
        filter: brightness(1.3) blur(1.2px);
        transform: scale(1.01);
    }
}

@keyframes light-pulse-3 {
    0%, 100% { 
        filter: brightness(1.5) blur(0px);
        transform: scale(1);
    }
    20% { 
        filter: brightness(1) blur(0.4px);
        transform: scale(0.97);
    }
    40% { 
        filter: brightness(1.3) blur(1.1px);
        transform: scale(1.04);
    }
    70% { 
        filter: brightness(1.1) blur(0.6px);
        transform: scale(1.01);
    }
}

.map-marker {
    border-radius: var(--border-radius-pill);
    cursor: pointer;
    transition: transform var(--motion-duration-normal) var(--motion-easing-easeOut), 
                filter var(--motion-duration-slow) var(--motion-easing-easeOut), 
                opacity var(--motion-duration-normal) var(--motion-easing-easeOut),
                box-shadow var(--motion-duration-normal) var(--motion-easing-easeOut);
    animation: marker-appear var(--motion-duration-normal) var(--motion-easing-easeOut);
    box-shadow: var(--elevation-2);
}

.map-marker:hover {
    transform: scale(1.2);
    z-index: 10;
    box-shadow: var(--elevation-3);
} 

/* Apply natural light pulsing to markers */
.map-marker.light-pulse {
    animation: marker-appear var(--motion-duration-normal) var(--motion-easing-easeOut), 
            light-pulse-1 2s var(--motion-easing-easeInOut) infinite;
    will-change: transform, opacity, filter;
    transform: translateZ(0); /* Force hardware acceleration */
}

/* Minimal changes to masked content to preserve coordinate calculations */
.masked-content {
    border-radius: var(--border-radius-pill);
    cursor: pointer;
    transition: transform var(--motion-duration-normal) var(--motion-easing-easeOut), 
                filter var(--motion-duration-slow) var(--motion-easing-easeOut), 
                opacity var(--motion-duration-normal) var(--motion-easing-easeOut), 
                clip-path var(--motion-duration-slow) var(--motion-easing-easeOut);
    animation: marker-appear var(--motion-duration-normal) var(--motion-easing-easeOut);
    will-change: transform, opacity, filter;
    transform: translateZ(0); /* Force hardware acceleration */
}

.masked-content:hover {
    filter: brightness(1.5);
    z-index: 10;
}

/* Apply natural light pulsing to masked content with variation */
.masked-content.light-pulse {
    animation: marker-appear var(--motion-duration-normal) var(--motion-easing-easeOut), 
               light-pulse-3 4s var(--motion-easing-easeInOut) infinite;
}

/* Performance optimized markers for large datasets */
.marker-optimized {
    will-change: transform, opacity;
    transform: translateZ(0);
    transition: transform 0.2s ease-out;
}

.marker-optimized:hover {
    transform: scale(1.1) translateZ(0);
}

/* Simplified animations for performance */
.marker-simple {
    animation: marker-appear 0.25s ease-out;
    will-change: transform;
    transform: translateZ(0);
}

/* Container-level pulsing for complex markers with drop shadows */
.light-container {
    position: relative;
    transition: opacity var(--motion-duration-slow) var(--motion-easing-easeOut), 
                transform var(--motion-duration-normal) var(--motion-easing-easeOut);
}

/* Animate the entire container including drop shadows */
@keyframes container-light-pulse {
    0%, 100% { 
        opacity: 1;
        transform: scale(1);
    }
    25% { 
        opacity: 0.9;
        transform: scale(1.02);
    }
    50% { 
        opacity: 1.1;
        transform: scale(0.99);
    }
    75% { 
        opacity: 0.95;
        transform: scale(1.01);
    }
}

.light-container.pulse-glow {
    animation: container-light-pulse 1.75s var(--motion-easing-easeInOut) infinite;
}

/* Smooth animation when transitioning between hover states */
.marker-hover-transition {
    transition: all 0.4s var(--motion-easing-easeInOut);
}

/* Enhanced transition for filter effects when region is hovered */
.marker-filter-transition {
    transition: filter var(--motion-duration-slow) var(--motion-easing-easeOut),
                opacity var(--motion-duration-slow) var(--motion-easing-easeOut),
                transform var(--motion-duration-normal) var(--motion-easing-easeOut);
}

/* Fast transition for masking changes - instant clip-path, fast filter for responsive masking */
.masking-transition {
    transition: filter var(--motion-duration-fast) var(--motion-easing-easeOut);
} 